# REST约束
## REST体系结构约束(REST Architectural Constraints)  
REST代表代表性状态转移，该术语由Roy Fielding于2000年提出。它是一种 **体系结构风格**，用于通过HTTP设计松散耦合的应用程序，通常用于Web服务的开发中。 REST没有强制执行任何有关如何在较低级别实施的规则，它只是提出了较高级别的设计指南，让您考虑自己的实施。  

在上一份工作中，我为一家大型电信公司设计了RESTful API长达两年。 在这篇文章中，除了标准的设计实践之外，我将分享我的想法。 您可能在某些方面不同意我的观点，这完全可以。 我很乐意以开放的态度与您讨论任何事情。  

让我们从特定于标准设计的内容开始，以清除“ Roy Fielding”要我们构建的内容。 然后，我们将讨论我的东西，这将在您设计RESTful API时朝着更好的方向发展。  

## 体系结构约束

REST定义了6个体系结构约束，这些约束使任何Web服务都成为真正的RESTful API。  
1. **统一的接口(Uniform interface)**  
2. **客户服务器(Client–server)**  
3. **无状态(Stateless)**  
4. **可缓存(Cacheable)**  
5. **分层系统(Layered system)**  
6. **按需编码（可选）(Code on demand (optional))**  

### 统一的接口(Uniform interface)  
当约束名称本身应用时，您必须为系统中暴露给API使用者的资源确定API接口，并严格遵循该接口。系统中的资源应该只有一个逻辑URI，并且应该提供一种获取相关数据或其他数据的方法。 **最好将资源与网页同义**。  

任何单个资源都不应太大，并在其表示中包含所有内容。 只要相关，资源应包含 **指向相对URI的链接（HATEOAS）**，以获取相关信息。  

另外，整个系统上的资源表述应遵循特定的准则，例如命名约定，链接格式或数据格式（XML或/和JSON）。  

所有资源都应通过通用方法（例如HTTP GET）进行访问，并使用一致的方法进行类似的修改。  

 >**一旦开发人员熟悉您的API之一，他就应该能够对其他API遵循类似的方法。**  

### 客户服务器(Client–server)
从本质上讲，这意味着客户端应用程序和服务器应用程序必须能够独立发展，而彼此之间没有任何依赖关系。 客户应该只知道资源URI，仅此而已。如今，这是web开发中的常规实践，所以对您来说不需要什么花哨的东西。保持简单。  

 >**服务器和客户端也可以独立替换和开发，只要它们之间的接口不变即可。**  
 
 
### 无状态(Stateless)

Roy fielding从HTTP获得了灵感，因此它反映了这一约束。 使所有客户端-服务器交互都变为无状态。 服务器将不存储有关客户端发出的最新HTTP请求的任何内容。 它将每个请求视为新请求。 没有会话(Session)，没有历史(history)。  

如果客户端应用程序需要是终端用户的有状态应用程序，其中用户登录一次，然后执行其他授权操作，那么来自客户机的每个请求都应该包含为该请求提供服务所需的所有信息——包括身份验证和授权细节。  

 >**请求之间不得在服务器上存储任何客户端上下文。 客户端负责管理应用程序的状态。**  

### 可缓存(Cacheable)

在当今世界中，缓存数据和响应在任何适用/可能的地方都至关重要。 您在此处阅读的网页也是HTML页面的缓存版本。 缓存可以减轻客户端的性能，并为客户端带来更好的性能，并为服务器提供更好的扩展性。  

在REST中，缓存应在适用时应用于资源，然后这些资源必须声明自己可缓存。 可以在服务器或客户端上实现缓存。  

 >**管理良好的缓存部分或完全消除了某些客户端-服务器交互，从而进一步提高了可伸缩性和性能。**  


### 分层系统(Layered system)

REST允许您使用分层的系统架构，例如，您可以在服务器A上部署API，并在服务器B上存储数据并在服务器C中对请求进行身份验证。 客户端通常无法确定它是直接连接到最终服务器还是中间连接。  

### 按需编码（可选）(Code on demand (optional)) 

好吧，这个约束是可选的。 大多数时候，您将以XML或JSON的形式发送资源的静态表示。 但是，如果需要，您可以自由`返回可执行代码(return executable code)`以支持应用程序的一部分，例如，客户端可以调用您的API来获取UI小部件呈现代码。 这是允许的。  


 >**以上所有约束条件都可以帮助您构建真正的RESTful API，并且应该遵循它们。 不过，有时您可能会发现自己违反了一两个约束。 别担心; 您仍在制作RESTful API，但不是“真正的RESTful”。**  

请注意，上述所有约束与WWW（网络）关系最密切。 使用RESTful API，您可以对Web服务执行与对网页相同的操作。  






